{
    "info": {
        "name": "SmartSurvey AI API Tests",
        "description": "Collection để test các API tạo khảo sát bằng AI",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "ai_service_url",
            "value": "http://localhost:8002"
        },
        {
            "key": "backend_url",
            "value": "http://localhost:8080"
        },
        {
            "key": "jwt_token",
            "value": "YOUR_JWT_TOKEN_HERE"
        }
    ],
    "item": [
        {
            "name": "AI Service Tests",
            "item": [
                {
                    "name": "Health Check AI Service",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{ai_service_url}}/health",
                            "host": [
                                "{{ai_service_url}}"
                            ],
                            "path": [
                                "health"
                            ]
                        }
                    }
                },
                {
                    "name": "Validate Prompt",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{ai_service_url}}/validate-prompt?prompt=Tạo khảo sát về sức khỏe nhân viên",
                            "host": [
                                "{{ai_service_url}}"
                            ],
                            "path": [
                                "validate-prompt"
                            ],
                            "query": [
                                {
                                    "key": "prompt",
                                    "value": "Tạo khảo sát về sức khỏe nhân viên"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Get Categories",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{ai_service_url}}/categories",
                            "host": [
                                "{{ai_service_url}}"
                            ],
                            "path": [
                                "categories"
                            ]
                        }
                    }
                },
                {
                    "name": "Generate Survey Direct",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Khảo sát sức khỏe nhân viên\",\n  \"description\": \"Đánh giá tình hình sức khỏe và môi trường làm việc\",\n  \"category_id\": 2,\n  \"ai_prompt\": \"Tạo khảo sát về sức khỏe nhân viên trong công ty, bao gồm các câu hỏi về thói quen ăn uống, tập thể dục, stress công việc và môi trường làm việc\",\n  \"target_audience\": \"Nhân viên văn phòng\"\n}"
                        },
                        "url": {
                            "raw": "{{ai_service_url}}/generate",
                            "host": [
                                "{{ai_service_url}}"
                            ],
                            "path": [
                                "generate"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Backend API Tests",
            "item": [
                {
                    "name": "Backend Health Check",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{backend_url}}/ai/health",
                            "host": [
                                "{{backend_url}}"
                            ],
                            "path": [
                                "ai",
                                "health"
                            ]
                        }
                    }
                },
                {
                    "name": "Backend Validate Prompt",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{backend_url}}/ai/validate-prompt?prompt=Tạo khảo sát về sức khỏe nhân viên",
                            "host": [
                                "{{backend_url}}"
                            ],
                            "path": [
                                "ai",
                                "validate-prompt"
                            ],
                            "query": [
                                {
                                    "key": "prompt",
                                    "value": "Tạo khảo sát về sức khỏe nhân viên"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Generate Survey - Main API",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Khảo sát sức khỏe nhân viên 2025\",\n  \"description\": \"Đánh giá tình hình sức khỏe và môi trường làm việc của nhân viên\",\n  \"categoryId\": 2,\n  \"aiPrompt\": \"Tạo khảo sát về sức khỏe nhân viên trong công ty, bao gồm các câu hỏi về thói quen ăn uống, tập thể dục, stress công việc, môi trường làm việc, và mức độ hài lòng với các chính sách chăm sóc sức khỏe của công ty. Tạo 5-7 câu hỏi với các loại khác nhau như trắc nghiệm, đánh giá và tự luận.\",\n  \"targetAudience\": \"Nhân viên văn phòng từ 22-45 tuổi\"\n}"
                        },
                        "url": {
                            "raw": "{{backend_url}}/ai/generate-survey",
                            "host": [
                                "{{backend_url}}"
                            ],
                            "path": [
                                "ai",
                                "generate-survey"
                            ]
                        }
                    }
                },
                {
                    "name": "Generate Survey - Customer Satisfaction",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Khảo sát hài lòng khách hàng\",\n  \"description\": \"Đánh giá mức độ hài lòng về sản phẩm và dịch vụ\",\n  \"categoryId\": 1,\n  \"aiPrompt\": \"Tạo khảo sát đánh giá mức độ hài lòng của khách hàng về sản phẩm smartphone, bao gồm chất lượng, giá cả, dịch vụ hỗ trợ và khuyến nghị\",\n  \"targetAudience\": \"Khách hàng đã mua sản phẩm\"\n}"
                        },
                        "url": {
                            "raw": "{{backend_url}}/ai/generate-survey",
                            "host": [
                                "{{backend_url}}"
                            ],
                            "path": [
                                "ai",
                                "generate-survey"
                            ]
                        }
                    }
                }
            ]
        }
    ]
}